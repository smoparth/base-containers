# =============================================================================
# ODH Base Containers - CUDA 12.9 Build Arguments
# =============================================================================
#
# Build arguments for CUDA 12.9.x base image (GPU workloads).
# This file is passed directly to podman/buildah via --build-arg-file.
#
# Source: https://gitlab.com/nvidia/container-images/cuda/-/tree/master/dist/12.9.1
#
# Usage:
#   ./scripts/build.sh cuda-12.9
#
# =============================================================================

# -----------------------------------------------------------------------------
# Image Tag (used by build.sh)
# -----------------------------------------------------------------------------
IMAGE_TAG=12.9-py312

# Python version bundled with this CUDA image (used in container labels)
PYTHON_VERSION=3.12

# -----------------------------------------------------------------------------
# Base Image
# -----------------------------------------------------------------------------
# Use sclorg Python image on CentOS Stream 9 (UBI 9 lacks CUDA dependencies)
# For reproducible builds, override with a pinned digest
BASE_IMAGE=quay.io/sclorg/python-312-c9s:c9s

# -----------------------------------------------------------------------------
# CUDA Versions
# Source: https://gitlab.com/nvidia/container-images/cuda/-/tree/master/dist/12.9.1
# -----------------------------------------------------------------------------
CUDA_VERSION=12.9.1
NV_CUDA_CUDART_VERSION=12.9.79-1
NV_CUDA_LIB_VERSION=12.9.1-1
NV_NVTX_VERSION=12.9.79-1

# -----------------------------------------------------------------------------
# NVIDIA Driver Requirements
# Defines compatible driver versions for nvidia-container-runtime
# Source: https://gitlab.com/nvidia/container-images/cuda/-/blob/master/dist/12.9.1/ubi9/base/Dockerfile
# -----------------------------------------------------------------------------
NVIDIA_REQUIRE_CUDA="cuda>=12.9 brand=unknown,driver>=535,driver<536 brand=grid,driver>=535,driver<536 brand=tesla,driver>=535,driver<536 brand=nvidia,driver>=535,driver<536 brand=quadro,driver>=535,driver<536 brand=quadrortx,driver>=535,driver<536 brand=nvidiartx,driver>=535,driver<536 brand=vapps,driver>=535,driver<536 brand=vpc,driver>=535,driver<536 brand=vcs,driver>=535,driver<536 brand=vws,driver>=535,driver<536 brand=cloudgaming,driver>=535,driver<536 brand=unknown,driver>=550,driver<551 brand=grid,driver>=550,driver<551 brand=tesla,driver>=550,driver<551 brand=nvidia,driver>=550,driver<551 brand=quadro,driver>=550,driver<551 brand=quadrortx,driver>=550,driver<551 brand=nvidiartx,driver>=550,driver<551 brand=vapps,driver>=550,driver<551 brand=vpc,driver>=550,driver<551 brand=vcs,driver>=550,driver<551 brand=vws,driver>=550,driver<551 brand=cloudgaming,driver>=550,driver<551 brand=unknown,driver>=560,driver<561 brand=grid,driver>=560,driver<561 brand=tesla,driver>=560,driver<561 brand=nvidia,driver>=560,driver<561 brand=quadro,driver>=560,driver<561 brand=quadrortx,driver>=560,driver<561 brand=nvidiartx,driver>=560,driver<561 brand=vapps,driver>=560,driver<561 brand=vpc,driver>=560,driver<561 brand=vcs,driver>=560,driver<561 brand=vws,driver>=560,driver<561 brand=cloudgaming,driver>=560,driver<561 brand=unknown,driver>=565,driver<566 brand=grid,driver>=565,driver<566 brand=tesla,driver>=565,driver<566 brand=nvidia,driver>=565,driver<566 brand=quadro,driver>=565,driver<566 brand=quadrortx,driver>=565,driver<566 brand=nvidiartx,driver>=565,driver<566 brand=vapps,driver>=565,driver<566 brand=vpc,driver>=565,driver<566 brand=vcs,driver>=565,driver<566 brand=vws,driver>=565,driver<566 brand=cloudgaming,driver>=565,driver<566 brand=unknown,driver>=570,driver<571 brand=grid,driver>=570,driver<571 brand=tesla,driver>=570,driver<571 brand=nvidia,driver>=570,driver<571 brand=quadro,driver>=570,driver<571 brand=quadrortx,driver>=570,driver<571 brand=nvidiartx,driver>=570,driver<571 brand=vapps,driver>=570,driver<571 brand=vpc,driver>=570,driver<571 brand=vcs,driver>=570,driver<571 brand=vws,driver>=570,driver<571 brand=cloudgaming,driver>=570,driver<571"

# -----------------------------------------------------------------------------
# cuBLAS
# -----------------------------------------------------------------------------
NV_LIBCUBLAS_VERSION=12.9.1.4-1

# -----------------------------------------------------------------------------
# NPP (NVIDIA Performance Primitives)
# -----------------------------------------------------------------------------
NV_LIBNPP_VERSION=12.4.1.87-1

# -----------------------------------------------------------------------------
# NCCL (NVIDIA Collective Communications Library)
# -----------------------------------------------------------------------------
NV_LIBNCCL_VERSION=2.27.3
NV_LIBNCCL_PACKAGE_VERSION=2.27.3-1

# -----------------------------------------------------------------------------
# cuDNN (CUDA Deep Neural Network library)
# Note: Check NVIDIA repo for the exact version available for 12.9
# -----------------------------------------------------------------------------
NV_CUDNN_VERSION=9.8.0.87-1

# -----------------------------------------------------------------------------
# PyPI Indexes
# -----------------------------------------------------------------------------
PIP_INDEX_URL=https://pypi.org/simple
PIP_EXTRA_INDEX_URL=https://download.pytorch.org/whl/cu129
