# =============================================================================
# ODH Base Containers - CUDA 12.8 Build Arguments
# =============================================================================
#
# Build arguments for CUDA 12.8.x base image (GPU workloads).
# This file is passed directly to podman/buildah via --build-arg-file.
#
# Source: https://gitlab.com/nvidia/container-images/cuda/-/tree/master/dist/12.8.1
#
# Usage:
#   ./scripts/build.sh cuda-12.8
#
# =============================================================================

# -----------------------------------------------------------------------------
# Image Tag (used by build.sh)
# -----------------------------------------------------------------------------
IMAGE_TAG=12.8-py312

# Python version bundled with this CUDA image (used in container labels)
PYTHON_VERSION=3.12

# -----------------------------------------------------------------------------
# Base Image
# -----------------------------------------------------------------------------
# Use sclorg Python image on CentOS Stream 9 (UBI 9 lacks CUDA dependencies)
# Digest is pinned for reproducible builds and auto-updated by Renovate
# Source: https://quay.io/repository/sclorg/python-312-c9s
BASE_IMAGE=quay.io/sclorg/python-312-c9s:c9s@sha256:9a5887b50d29dd1a307ab6e7b25885203c977a856dca75c9c64d135f571f8b54

# -----------------------------------------------------------------------------
# CUDA Versions
# Source: https://gitlab.com/nvidia/container-images/cuda/-/tree/master/dist/12.8.1
# -----------------------------------------------------------------------------
CUDA_MAJOR=12
CUDA_MAJOR_MINOR=12-8
CUDA_MAJOR_MINOR_DOT=12.8
CUDA_VERSION=12.8.1
NV_CUDA_CUDART_VERSION=12.8.90-1
NV_CUDA_LIB_VERSION=12.8.1-1
NV_NVTX_VERSION=12.8.90-1

# -----------------------------------------------------------------------------
# NVIDIA Driver Requirements
# Defines compatible driver versions for nvidia-container-runtime
# Source: https://gitlab.com/nvidia/container-images/cuda/-/blob/master/dist/12.8.1/ubi9/base/Dockerfile
# -----------------------------------------------------------------------------
NVIDIA_REQUIRE_CUDA="cuda>=12.8 brand=unknown,driver>=470,driver<471 brand=grid,driver>=470,driver<471 brand=tesla,driver>=470,driver<471 brand=nvidia,driver>=470,driver<471 brand=quadro,driver>=470,driver<471 brand=quadrortx,driver>=470,driver<471 brand=nvidiartx,driver>=470,driver<471 brand=vapps,driver>=470,driver<471 brand=vpc,driver>=470,driver<471 brand=vcs,driver>=470,driver<471 brand=vws,driver>=470,driver<471 brand=cloudgaming,driver>=470,driver<471 brand=unknown,driver>=535,driver<536 brand=grid,driver>=535,driver<536 brand=tesla,driver>=535,driver<536 brand=nvidia,driver>=535,driver<536 brand=quadro,driver>=535,driver<536 brand=quadrortx,driver>=535,driver<536 brand=nvidiartx,driver>=535,driver<536 brand=vapps,driver>=535,driver<536 brand=vpc,driver>=535,driver<536 brand=vcs,driver>=535,driver<536 brand=vws,driver>=535,driver<536 brand=cloudgaming,driver>=535,driver<536 brand=unknown,driver>=550,driver<551 brand=grid,driver>=550,driver<551 brand=tesla,driver>=550,driver<551 brand=nvidia,driver>=550,driver<551 brand=quadro,driver>=550,driver<551 brand=quadrortx,driver>=550,driver<551 brand=nvidiartx,driver>=550,driver<551 brand=vapps,driver>=550,driver<551 brand=vpc,driver>=550,driver<551 brand=vcs,driver>=550,driver<551 brand=vws,driver>=550,driver<551 brand=cloudgaming,driver>=550,driver<551 brand=unknown,driver>=560,driver<561 brand=grid,driver>=560,driver<561 brand=tesla,driver>=560,driver<561 brand=nvidia,driver>=560,driver<561 brand=quadro,driver>=560,driver<561 brand=quadrortx,driver>=560,driver<561 brand=nvidiartx,driver>=560,driver<561 brand=vapps,driver>=560,driver<561 brand=vpc,driver>=560,driver<561 brand=vcs,driver>=560,driver<561 brand=vws,driver>=560,driver<561 brand=cloudgaming,driver>=560,driver<561 brand=unknown,driver>=565,driver<566 brand=grid,driver>=565,driver<566 brand=tesla,driver>=565,driver<566 brand=nvidia,driver>=565,driver<566 brand=quadro,driver>=565,driver<566 brand=quadrortx,driver>=565,driver<566 brand=nvidiartx,driver>=565,driver<566 brand=vapps,driver>=565,driver<566 brand=vpc,driver>=565,driver<566 brand=vcs,driver>=565,driver<566 brand=vws,driver>=565,driver<566 brand=cloudgaming,driver>=565,driver<566"

# -----------------------------------------------------------------------------
# cuBLAS
# Source: https://gitlab.com/nvidia/container-images/cuda/-/blob/master/dist/12.8.1/ubi9/runtime/Dockerfile
# -----------------------------------------------------------------------------
NV_LIBCUBLAS_VERSION=12.8.4.1-1

# -----------------------------------------------------------------------------
# NPP (NVIDIA Performance Primitives)
# Source: https://gitlab.com/nvidia/container-images/cuda/-/blob/master/dist/12.8.1/ubi9/runtime/Dockerfile
# -----------------------------------------------------------------------------
NV_LIBNPP_VERSION=12.3.3.100-1

# -----------------------------------------------------------------------------
# NCCL (NVIDIA Collective Communications Library)
# Source: https://gitlab.com/nvidia/container-images/cuda/-/blob/master/dist/12.8.1/ubi9/runtime/Dockerfile
# -----------------------------------------------------------------------------
NV_LIBNCCL_VERSION=2.25.1
NV_LIBNCCL_PACKAGE_VERSION=2.25.1-1

# -----------------------------------------------------------------------------
# cuDNN (CUDA Deep Neural Network library)
# Source: https://gitlab.com/nvidia/container-images/cuda/-/blob/master/dist/12.8.1/ubi9/runtime/cudnn/Dockerfile
# -----------------------------------------------------------------------------
NV_CUDNN_VERSION=9.8.0.87-1

# -----------------------------------------------------------------------------
# PyPI Indexes
# -----------------------------------------------------------------------------
PIP_INDEX_URL=https://pypi.org/simple
PIP_EXTRA_INDEX_URL=https://download.pytorch.org/whl/cu128
